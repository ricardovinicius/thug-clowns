[gd_scene load_steps=14 format=4 uid="uid://wuov3qqkqij8"]

[ext_resource type="TileSet" uid="uid://ci3jneu422ekh" path="res://tileset.tres" id="1_1bvp3"]
[ext_resource type="Script" uid="uid://d31f2ds0yk7ns" path="res://scripts/game_manager.gd" id="2_0xm2m"]
[ext_resource type="Script" uid="uid://byaqn0ykowfe7" path="res://scripts/tile_map_layer.gd" id="2_lquwl"]
[ext_resource type="TileSet" uid="uid://b1e4hjm8ukcja" path="res://tileset_highlight.tres" id="3_dg77c"]
[ext_resource type="Texture2D" uid="uid://df0knudj3efk" path="res://assets/highlight_tile_1.png" id="3_lquwl"]
[ext_resource type="PackedScene" uid="uid://dpdqu0w8xekop" path="res://tank_char.tscn" id="5_272bh"]
[ext_resource type="PackedScene" uid="uid://b6ksmm8rop6ya" path="res://ranged_char.tscn" id="6_5vw27"]
[ext_resource type="PackedScene" uid="uid://4cde370j31hb" path="res://mid_char.tscn" id="7_kek77"]
[ext_resource type="Texture2D" uid="uid://2o45k7j3nw14" path="res://assets/attack.png" id="8_4c57u"]
[ext_resource type="PackedScene" uid="uid://3alpsgfymeb7" path="res://test_char.tscn" id="8_kek77"]
[ext_resource type="Texture2D" uid="uid://veep1e4vc2bm" path="res://assets/run.png" id="9_efxa6"]
[ext_resource type="Resource" uid="uid://osp7qj5xbrxt" path="res://scripts/character_stats/TestStats.tres" id="9_kek77"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_1bvp3"]

[node name="Main" type="Node2D"]

[node name="TileMapLayer" type="TileMapLayer" parent="."]
z_as_relative = false
y_sort_enabled = true
tile_map_data = PackedByteArray("AAALAP7/AAAAAAAAAAALAP//AAAAAAAAAAALAAAAAAAAAAAAAAALAAEAAAAAAAAAAAALAAIAAAAAAAAAAAALAAMAAAAAAAAAAAAMAP7/AAAAAAAAAAAMAP//AAAAAAAAAAAMAAAAAAAAAAAAAAAMAAEAAAAAAAAAAAAMAAIAAAAAAAAAAAAMAAMAAAAAAAAAAAANAP7/AAAAAAAAAAANAP//AAAAAAAAAAANAAAAAAAAAAAAAAANAAEAAAAAAAAAAAANAAIAAAAAAAAAAAANAAMAAAAAAAAAAAAOAP7/AAAAAAAAAAAOAP//AAAAAAAAAAAOAAAAAAAAAAAAAAAOAAEAAAAAAAAAAAAOAAIAAAAAAAAAAAAOAAMAAAAAAAAAAAALAAQAAAAAAAAAAAALAAUAAAAAAAAAAAAMAAQAAAAAAAAAAAAMAAUAAAAAAAAAAAANAAQAAAAAAAAAAAANAAUAAAAAAAAAAAAOAAQAAAAAAAAAAAAOAAUAAAAAAAAAAAAPAP7/AAAAAAAAAAAPAP//AAAAAAAAAAAPAAAAAAAAAAAAAAAPAAEAAAAAAAAAAAAPAAIAAAAAAAAAAAAPAAMAAAAAAAAAAAAPAAQAAAAAAAAAAAAPAAUAAAAAAAAAAAAQAP7/AAAAAAAAAAAQAP//AAAAAAAAAAAQAAAAAAAAAAAAAAAQAAEAAAAAAAAAAAAQAAIAAAAAAAAAAAAQAAMAAAAAAAAAAAAQAAQAAAAAAAAAAAAQAAUAAAAAAAAAAAARAP7/AAAAAAAAAAARAP//AAAAAAAAAAARAAAAAAAAAAAAAAARAAEAAAAAAAAAAAARAAIAAAAAAAAAAAARAAMAAAAAAAAAAAARAAQAAAAAAAAAAAARAAUAAAAAAAAAAAASAP7/AAAAAAAAAAASAP//AAAAAAAAAAASAAAAAAAAAAAAAAASAAEAAAAAAAAAAAASAAIAAAAAAAAAAAASAAMAAAAAAAAAAAASAAQAAAAAAAAAAAASAAUAAAAAAAAAAAA=")
tile_set = ExtResource("1_1bvp3")
script = ExtResource("2_lquwl")

[node name="SpawnZone_P1" type="TileMapLayer" parent="TileMapLayer"]
visible = false
z_as_relative = false
y_sort_enabled = true
tile_map_data = PackedByteArray("AAALAAMAAgAAAAAAAAALAAQAAgAAAAAAAAALAAUAAgAAAAAAAAAMAAQAAgAAAAAAAAAMAAUAAgAAAAAAAAANAAUAAgAAAAAAAAA=")
tile_set = ExtResource("1_1bvp3")

[node name="SpawnZone_P2" type="TileMapLayer" parent="TileMapLayer"]
visible = false
z_as_relative = false
y_sort_enabled = true
tile_map_data = PackedByteArray("AAAQAP7/AgAAAAAAAAARAP7/AgAAAAAAAAARAP//AgAAAAAAAAASAP7/AgAAAAAAAAASAP//AgAAAAAAAAASAAAAAgAAAAAAAAA=")
tile_set = ExtResource("1_1bvp3")

[node name="HighlightLayer" type="TileMapLayer" parent="."]
z_as_relative = false
y_sort_enabled = true
tile_set = ExtResource("3_dg77c")

[node name="Selector" type="Sprite2D" parent="."]
material = SubResource("CanvasItemMaterial_1bvp3")
texture = ExtResource("3_lquwl")
offset = Vector2(0, 8)

[node name="GameManager" type="Node2D" parent="." node_paths=PackedStringArray("tilemap", "spawn_layer_p1", "spawn_layer_p2", "highlight_layer", "selector", "turn_label", "round_label")]
script = ExtResource("2_0xm2m")
tilemap = NodePath("../TileMapLayer")
spawn_layer_p1 = NodePath("../TileMapLayer/SpawnZone_P1")
spawn_layer_p2 = NodePath("../TileMapLayer/SpawnZone_P2")
highlight_layer = NodePath("../HighlightLayer")
selector = NodePath("../Selector")
turn_label = NodePath("../TurnLabel")
round_label = NodePath("../RoundLabel")
tank_scene = ExtResource("5_272bh")
ranged_scene = ExtResource("6_5vw27")
mid_scene = ExtResource("7_kek77")

[node name="CanvasLayer" type="CanvasLayer" parent="GameManager"]

[node name="ActionUI_P1" type="Panel" parent="GameManager/CanvasLayer"]
offset_left = 22.0
offset_top = 213.0
offset_right = 115.0
offset_bottom = 253.0

[node name="AttackButton" type="Button" parent="GameManager/CanvasLayer/ActionUI_P1"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
icon = ExtResource("8_4c57u")

[node name="RunButton" type="Button" parent="GameManager/CanvasLayer/ActionUI_P1"]
layout_mode = 0
offset_left = 43.0
offset_top = 10.0
offset_right = 67.0
offset_bottom = 34.0
icon = ExtResource("9_efxa6")

[node name="ActionUI_P2" type="Panel" parent="GameManager/CanvasLayer"]
offset_left = 345.0
offset_top = 10.0
offset_right = 438.0
offset_bottom = 50.0

[node name="RunButton" type="Button" parent="GameManager/CanvasLayer/ActionUI_P2"]
layout_mode = 0
offset_left = 41.0
offset_top = 13.0
offset_right = 65.0
offset_bottom = 37.0
icon = ExtResource("9_efxa6")

[node name="AttackButton" type="Button" parent="GameManager/CanvasLayer/ActionUI_P2"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
icon = ExtResource("8_4c57u")

[node name="States" type="Node" parent="GameManager"]

[node name="TurnLabel" type="Label" parent="."]
offset_left = 58.0
offset_top = 247.0
offset_right = 416.0
offset_bottom = 270.0
horizontal_alignment = 1
vertical_alignment = 1

[node name="RoundLabel" type="Label" parent="."]
offset_left = 217.0
offset_top = 1.0
offset_right = 257.0
offset_bottom = 24.0
horizontal_alignment = 1

[node name="Player" parent="." node_paths=PackedStringArray("tilemap") instance=ExtResource("8_kek77")]
visible = false
position = Vector2(175, 87)
tilemap = NodePath("../TileMapLayer")
stats = ExtResource("9_kek77")

[connection signal="pressed" from="GameManager/CanvasLayer/ActionUI_P1/AttackButton" to="GameManager" method="_on_attack_button_pressed"]
[connection signal="pressed" from="GameManager/CanvasLayer/ActionUI_P1/RunButton" to="GameManager" method="_on_run_button_pressed"]
[connection signal="pressed" from="GameManager/CanvasLayer/ActionUI_P2/AttackButton" to="GameManager" method="_on_attack_button_pressed"]
