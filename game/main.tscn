[gd_scene load_steps=12 format=4 uid="uid://wuov3qqkqij8"]

[ext_resource type="TileSet" uid="uid://ci3jneu422ekh" path="res://tileset.tres" id="1_1bvp3"]
[ext_resource type="Script" uid="uid://d31f2ds0yk7ns" path="res://scripts/game_manager.gd" id="2_0xm2m"]
[ext_resource type="Script" uid="uid://byaqn0ykowfe7" path="res://scripts/tile_map_layer.gd" id="2_lquwl"]
[ext_resource type="Texture2D" uid="uid://df0knudj3efk" path="res://assets/highlight_tile.png" id="3_lquwl"]
[ext_resource type="PackedScene" uid="uid://dpdqu0w8xekop" path="res://tank_char.tscn" id="5_272bh"]
[ext_resource type="PackedScene" uid="uid://b6ksmm8rop6ya" path="res://ranged_char.tscn" id="6_5vw27"]
[ext_resource type="PackedScene" uid="uid://4cde370j31hb" path="res://mid_char.tscn" id="7_kek77"]
[ext_resource type="Texture2D" uid="uid://2o45k7j3nw14" path="res://assets/attack.png" id="8_4c57u"]
[ext_resource type="PackedScene" uid="uid://3alpsgfymeb7" path="res://test_char.tscn" id="8_kek77"]
[ext_resource type="Resource" uid="uid://osp7qj5xbrxt" path="res://scripts/character_stats/TestStats.tres" id="9_kek77"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_1bvp3"]

[node name="Main" type="Node2D"]

[node name="TileMapLayer" type="TileMapLayer" parent="."]
z_as_relative = false
y_sort_enabled = true
tile_map_data = PackedByteArray("AAAHAPz/AAAAAAAAAAAHAP3/AAAAAAAAAAAHAP7/AAAAAAAAAAAHAP//AAAAAAAAAAAHAAAAAAAAAAAAAAAHAAEAAAAAAAAAAAAHAAIAAAAAAAAAAAAHAAMAAAAAAAAAAAAIAPz/AAAAAAAAAAAIAP3/AAAAAAAAAAAIAP7/AAAAAAAAAAAIAP//AAAAAAAAAAAIAAAAAAAAAAAAAAAIAAEAAAAAAAAAAAAIAAIAAAAAAAAAAAAIAAMAAAAAAAAAAAAJAPz/AAAAAAAAAAAJAP3/AAAAAAAAAAAJAP7/AAAAAAAAAAAJAP//AAAAAAAAAAAJAAAAAAAAAAAAAAAJAAMAAAAAAAAAAAAKAPz/AAAAAAAAAAAKAP3/AAAAAAAAAAAKAP7/AAAAAAAAAAAKAP//AAAAAAAAAAAKAAAAAAAAAAAAAAAKAAEAAAAAAAAAAAALAPz/AAAAAAAAAAALAP3/AAAAAAAAAAALAP7/AAAAAAAAAAALAP//AAAAAAAAAAALAAAAAAAAAAAAAAALAAEAAAAAAAAAAAALAAIAAAAAAAAAAAAMAPz/AAAAAAAAAAAMAP3/AAAAAAAAAAAMAP7/AAAAAAAAAAAMAP//AAAAAAAAAAAMAAAAAAAAAAAAAAAMAAEAAAAAAAAAAAAMAAIAAAAAAAAAAAAMAAMAAAAAAAAAAAANAPz/AAAAAAAAAAANAP3/AAAAAAAAAAANAP7/AAAAAAAAAAANAP//AAAAAAAAAAANAAAAAAAAAAAAAAANAAEAAAAAAAAAAAANAAIAAAAAAAAAAAANAAMAAAAAAAAAAAAOAPz/AAAAAAAAAAAOAP3/AAAAAAAAAAAOAP7/AAAAAAAAAAAOAP//AAAAAAAAAAAOAAAAAAAAAAAAAAAOAAEAAAAAAAAAAAAOAAIAAAAAAAAAAAAOAAMAAAAAAAAAAAALAAMAAAAAAAAAAAAKAAMAAAAAAAAAAAAKAAIAAAAAAAAAAAAJAAIAAAAAAAAAAAAJAAEAAAAAAAAAAAA=")
tile_set = ExtResource("1_1bvp3")
script = ExtResource("2_lquwl")

[node name="SpawnZone_P1" type="TileMapLayer" parent="TileMapLayer"]
visible = false
z_as_relative = false
y_sort_enabled = true
tile_map_data = PackedByteArray("AAAHAAMAAgAAAAAAAAAHAAIAAgAAAAAAAAAIAAMAAgAAAAAAAAAJAAMAAgAAAAAAAAAIAAIAAgAAAAAAAAAHAAEAAgAAAAAAAAA=")
tile_set = ExtResource("1_1bvp3")

[node name="SpawnZone_P2" type="TileMapLayer" parent="TileMapLayer"]
visible = false
z_as_relative = false
y_sort_enabled = true
tile_map_data = PackedByteArray("AAAOAPz/AgAAAAAAAAAOAP3/AgAAAAAAAAAOAP7/AgAAAAAAAAANAPz/AgAAAAAAAAANAP3/AgAAAAAAAAAMAPz/AgAAAAAAAAA=")
tile_set = ExtResource("1_1bvp3")

[node name="HighlightLayer" type="TileMapLayer" parent="."]
tile_set = ExtResource("1_1bvp3")

[node name="Selector" type="Sprite2D" parent="."]
material = SubResource("CanvasItemMaterial_1bvp3")
texture = ExtResource("3_lquwl")
offset = Vector2(0, 8)

[node name="GameManager" type="Node2D" parent="." node_paths=PackedStringArray("tilemap", "spawn_layer_p1", "spawn_layer_p2", "highlight_layer", "selector", "turn_label", "round_label")]
script = ExtResource("2_0xm2m")
tilemap = NodePath("../TileMapLayer")
spawn_layer_p1 = NodePath("../TileMapLayer/SpawnZone_P1")
spawn_layer_p2 = NodePath("../TileMapLayer/SpawnZone_P2")
highlight_layer = NodePath("../HighlightLayer")
selector = NodePath("../Selector")
turn_label = NodePath("../TurnLabel")
round_label = NodePath("../RoundLabel")
tank_scene = ExtResource("5_272bh")
ranged_scene = ExtResource("6_5vw27")
mid_scene = ExtResource("7_kek77")

[node name="CanvasLayer" type="CanvasLayer" parent="GameManager"]

[node name="ActionUI" type="Panel" parent="GameManager/CanvasLayer"]
visible = false
offset_left = 15.0
offset_top = 129.0
offset_right = 108.0
offset_bottom = 169.0

[node name="AttackButton" type="Button" parent="GameManager/CanvasLayer/ActionUI"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
icon = ExtResource("8_4c57u")

[node name="States" type="Node" parent="GameManager"]

[node name="TurnLabel" type="Label" parent="."]
offset_left = 3.0
offset_top = 153.0
offset_right = 361.0
offset_bottom = 176.0
horizontal_alignment = 1
vertical_alignment = 1

[node name="RoundLabel" type="Label" parent="."]
offset_left = 163.0
offset_top = 6.0
offset_right = 203.0
offset_bottom = 29.0
horizontal_alignment = 1

[node name="Player" parent="." node_paths=PackedStringArray("tilemap") instance=ExtResource("8_kek77")]
visible = false
position = Vector2(175, 87)
tilemap = NodePath("../TileMapLayer")
stats = ExtResource("9_kek77")

[connection signal="pressed" from="GameManager/CanvasLayer/ActionUI/AttackButton" to="GameManager" method="_on_attack_button_pressed"]
