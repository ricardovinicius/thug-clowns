[gd_scene load_steps=17 format=4 uid="uid://wuov3qqkqij8"]

[ext_resource type="TileSet" uid="uid://ci3jneu422ekh" path="res://tileset.tres" id="1_1bvp3"]
[ext_resource type="Script" uid="uid://d31f2ds0yk7ns" path="res://scripts/game_manager.gd" id="2_0xm2m"]
[ext_resource type="Script" uid="uid://byaqn0ykowfe7" path="res://scripts/tile_map_layer.gd" id="2_lquwl"]
[ext_resource type="TileSet" uid="uid://b1e4hjm8ukcja" path="res://tileset_highlight.tres" id="3_dg77c"]
[ext_resource type="Texture2D" uid="uid://df0knudj3efk" path="res://assets/highlight_tile_1.png" id="3_lquwl"]
[ext_resource type="Texture2D" uid="uid://bf8vso64ohngn" path="res://assets/cenario.png" id="3_ycdy4"]
[ext_resource type="PackedScene" uid="uid://dpdqu0w8xekop" path="res://tank_char.tscn" id="5_272bh"]
[ext_resource type="PackedScene" uid="uid://b6ksmm8rop6ya" path="res://ranged_char.tscn" id="6_5vw27"]
[ext_resource type="PackedScene" uid="uid://4cde370j31hb" path="res://mid_char.tscn" id="7_kek77"]
[ext_resource type="Texture2D" uid="uid://3bggfwq72df2" path="res://assets/attack.png" id="8_4c57u"]
[ext_resource type="Texture2D" uid="uid://veep1e4vc2bm" path="res://assets/run.png" id="9_efxa6"]
[ext_resource type="Texture2D" uid="uid://bgojd4imfevh" path="res://assets/action_hud.png" id="9_w48qg"]
[ext_resource type="Texture2D" uid="uid://vtof6fueywut" path="res://assets/action_hud_inv.png" id="13_vivmo"]

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_1bvp3"]

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_2cqfq"]
texture = ExtResource("9_w48qg")

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_vivmo"]
texture = ExtResource("13_vivmo")

[node name="Main" type="Node2D"]

[node name="Cenario" type="Sprite2D" parent="."]
z_as_relative = false
position = Vector2(227, 121)
texture = ExtResource("3_ycdy4")

[node name="TileMapLayer" type="TileMapLayer" parent="."]
z_as_relative = false
y_sort_enabled = true
tile_map_data = PackedByteArray("AAALAP7/AAAAAAAAAAALAP//AAAAAAAAAAALAAAAAAAAAAAAAAALAAEAAAAAAAAAAAALAAIAAAAAAAAAAAALAAMAAAAAAAAAAAAMAP7/AAAAAAAAAAAMAP//AAAAAAAAAAAMAAAAAAAAAAAAAAAMAAEAAAAAAAAAAAAMAAIAAAAAAAAAAAAMAAMAAAAAAAAAAAANAP7/AAAAAAAAAAANAP//AAAAAAAAAAANAAAAAAAAAAAAAAANAAEAAAAAAAAAAAANAAIAAAAAAAAAAAANAAMAAAAAAAAAAAAOAP7/AAAAAAAAAAAOAP//AAAAAAAAAAAOAAAAAAAAAAAAAAAOAAEAAAAAAAAAAAAOAAIAAAAAAAAAAAAOAAMAAAAAAAAAAAALAAQAAAAAAAAAAAALAAUAAAAAAAAAAAAMAAQAAAAAAAAAAAAMAAUAAAAAAAAAAAANAAQAAAAAAAAAAAANAAUAAAAAAAAAAAAOAAQAAAAAAAAAAAAOAAUAAAAAAAAAAAAPAP7/AAAAAAAAAAAPAP//AAAAAAAAAAAPAAAAAAAAAAAAAAAPAAEAAAAAAAAAAAAPAAIAAAAAAAAAAAAPAAMAAAAAAAAAAAAPAAQAAAAAAAAAAAAPAAUAAAAAAAAAAAAQAP7/AAAAAAAAAAAQAP//AAAAAAAAAAAQAAAAAAAAAAAAAAAQAAEAAAAAAAAAAAAQAAIAAAAAAAAAAAAQAAMAAAAAAAAAAAAQAAQAAAAAAAAAAAAQAAUAAAAAAAAAAAARAP7/AAAAAAAAAAARAP//AAAAAAAAAAARAAAAAAAAAAAAAAARAAEAAAAAAAAAAAARAAIAAAAAAAAAAAARAAMAAAAAAAAAAAARAAQAAAAAAAAAAAARAAUAAAAAAAAAAAASAP7/AAAAAAAAAAASAP//AAAAAAAAAAASAAAAAAAAAAAAAAASAAEAAAAAAAAAAAASAAIAAAAAAAAAAAASAAMAAAAAAAAAAAASAAQAAAAAAAAAAAASAAUAAAAAAAAAAAA=")
tile_set = ExtResource("1_1bvp3")
script = ExtResource("2_lquwl")

[node name="SpawnZone_P1" type="TileMapLayer" parent="TileMapLayer"]
visible = false
z_as_relative = false
y_sort_enabled = true
tile_map_data = PackedByteArray("AAALAAMAAgAAAAAAAAALAAQAAgAAAAAAAAALAAUAAgAAAAAAAAAMAAQAAgAAAAAAAAAMAAUAAgAAAAAAAAANAAUAAgAAAAAAAAA=")
tile_set = ExtResource("1_1bvp3")

[node name="SpawnZone_P2" type="TileMapLayer" parent="TileMapLayer"]
visible = false
z_as_relative = false
y_sort_enabled = true
tile_map_data = PackedByteArray("AAAQAP7/AgAAAAAAAAARAP7/AgAAAAAAAAARAP//AgAAAAAAAAASAP7/AgAAAAAAAAASAP//AgAAAAAAAAASAAAAAgAAAAAAAAA=")
tile_set = ExtResource("1_1bvp3")

[node name="HighlightLayer" type="TileMapLayer" parent="."]
z_as_relative = false
y_sort_enabled = true
tile_set = ExtResource("3_dg77c")

[node name="Selector" type="Sprite2D" parent="."]
material = SubResource("CanvasItemMaterial_1bvp3")
texture = ExtResource("3_lquwl")
offset = Vector2(0, 8)

[node name="GameManager" type="Node2D" parent="." node_paths=PackedStringArray("tilemap", "spawn_layer_p1", "spawn_layer_p2", "highlight_layer", "selector", "turn_label", "round_label")]
script = ExtResource("2_0xm2m")
tilemap = NodePath("../TileMapLayer")
spawn_layer_p1 = NodePath("../TileMapLayer/SpawnZone_P1")
spawn_layer_p2 = NodePath("../TileMapLayer/SpawnZone_P2")
highlight_layer = NodePath("../HighlightLayer")
selector = NodePath("../Selector")
turn_label = NodePath("../TurnLabel")
round_label = NodePath("../RoundLabel")
tank_scene = ExtResource("5_272bh")
ranged_scene = ExtResource("6_5vw27")
mid_scene = ExtResource("7_kek77")

[node name="CanvasLayer" type="CanvasLayer" parent="GameManager"]

[node name="ActionUI_P1" type="Panel" parent="GameManager/CanvasLayer"]
visible = false
offset_left = 11.0
offset_top = 189.0
offset_right = 217.0
offset_bottom = 254.0
theme_override_styles/panel = SubResource("StyleBoxTexture_2cqfq")

[node name="AttackButton" type="Button" parent="GameManager/CanvasLayer/ActionUI_P1"]
custom_minimum_size = Vector2(16, 16)
layout_mode = 0
offset_left = 20.0
offset_top = 33.0
offset_right = 44.0
offset_bottom = 57.0
icon = ExtResource("8_4c57u")

[node name="RunButton" type="Button" parent="GameManager/CanvasLayer/ActionUI_P1"]
custom_minimum_size = Vector2(16, 16)
layout_mode = 0
offset_left = 55.0
offset_top = 33.0
offset_right = 79.0
offset_bottom = 57.0
icon = ExtResource("9_efxa6")

[node name="SpecialButton" type="Button" parent="GameManager/CanvasLayer/ActionUI_P1"]
custom_minimum_size = Vector2(16, 16)
layout_mode = 0
offset_left = 89.0
offset_top = 33.0
offset_right = 113.0
offset_bottom = 57.0
expand_icon = true

[node name="CharacterIcon" type="TextureRect" parent="GameManager/CanvasLayer/ActionUI_P1"]
layout_mode = 0
offset_left = 131.0
offset_top = 2.9999998
offset_right = 171.0
offset_bottom = 43.0
scale = Vector2(1.6371497, 1.5274312)
expand_mode = 3

[node name="CharacterName" type="Label" parent="GameManager/CanvasLayer/ActionUI_P1"]
layout_mode = 0
offset_left = 19.0
offset_top = 9.0
offset_right = 59.0
offset_bottom = 32.0

[node name="ActionUI_P2" type="Panel" parent="GameManager/CanvasLayer"]
visible = false
offset_left = 236.0
offset_top = 6.0
offset_right = 442.0
offset_bottom = 71.0
theme_override_styles/panel = SubResource("StyleBoxTexture_vivmo")

[node name="CharacterName" type="Label" parent="GameManager/CanvasLayer/ActionUI_P2"]
layout_mode = 0
offset_left = 83.0
offset_top = 9.0
offset_right = 123.0
offset_bottom = 32.0

[node name="AttackButton" type="Button" parent="GameManager/CanvasLayer/ActionUI_P2"]
layout_mode = 0
offset_left = 86.0
offset_top = 32.0
offset_right = 110.0
offset_bottom = 56.0
icon = ExtResource("8_4c57u")

[node name="RunButton" type="Button" parent="GameManager/CanvasLayer/ActionUI_P2"]
layout_mode = 0
offset_left = 122.0
offset_top = 32.0
offset_right = 146.0
offset_bottom = 56.0
icon = ExtResource("9_efxa6")

[node name="SpecialButton" type="Button" parent="GameManager/CanvasLayer/ActionUI_P2"]
layout_mode = 0
offset_left = 159.0
offset_top = 32.0
offset_right = 183.0
offset_bottom = 56.0
expand_icon = true

[node name="CharacterIcon" type="TextureRect" parent="GameManager/CanvasLayer/ActionUI_P2"]
layout_mode = 0
offset_left = 4.9999924
offset_top = 2.0
offset_right = 44.999992
offset_bottom = 42.0
scale = Vector2(1.6371497, 1.5274312)
expand_mode = 3
flip_h = true

[node name="States" type="Node" parent="GameManager"]

[node name="TurnLabel" type="Label" parent="."]
offset_left = 52.0
offset_top = 239.0
offset_right = 410.0
offset_bottom = 262.0
horizontal_alignment = 1
vertical_alignment = 1

[node name="RoundLabel" type="Label" parent="."]
offset_left = 30.0
offset_top = 15.0
offset_right = 70.0
offset_bottom = 38.0
horizontal_alignment = 1

[connection signal="pressed" from="GameManager/CanvasLayer/ActionUI_P1/AttackButton" to="GameManager" method="_on_attack_button_pressed"]
[connection signal="pressed" from="GameManager/CanvasLayer/ActionUI_P1/RunButton" to="GameManager" method="_on_run_button_pressed"]
[connection signal="pressed" from="GameManager/CanvasLayer/ActionUI_P1/SpecialButton" to="GameManager" method="_on_special_button_pressed"]
[connection signal="pressed" from="GameManager/CanvasLayer/ActionUI_P2/AttackButton" to="GameManager" method="_on_attack_button_pressed"]
[connection signal="pressed" from="GameManager/CanvasLayer/ActionUI_P2/RunButton" to="GameManager" method="_on_run_button_pressed"]
[connection signal="pressed" from="GameManager/CanvasLayer/ActionUI_P2/SpecialButton" to="GameManager" method="_on_special_button_pressed"]
